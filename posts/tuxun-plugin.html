<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/yun.svg"><script>!function(){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><style type="text/css">:root{color-scheme:light dark;--va-c-bg:#fff}html.dark{--va-c-bg:#000}html{background-color:var(--va-c-bg)}</style><script>const locale=localStorage.getItem("valaxy-locale")||"zh-CN";document.documentElement.setAttribute("lang",locale)</script><script type="module" async="" crossorigin="" src="/assets/app.BRwkRBDg.js"></script><link rel="modulepreload" crossorigin="" href="/assets/framework.Ml9S_Aih.js"><link rel="modulepreload" crossorigin="" href="/assets/chunks/@vueuse/motion.93lXQYSQ.js"><link rel="modulepreload" crossorigin="" href="/assets/chunks/vue-router.Zlx2D3ED.js"><link rel="modulepreload" crossorigin="" href="/assets/chunks/dayjs.Byk5cVHE.js"><link rel="modulepreload" crossorigin="" href="/assets/chunks/vue-i18n.Pgi5LQXI.js"><link rel="modulepreload" crossorigin="" href="/assets/chunks/pinia.2Hn_MpgA.js"><link rel="modulepreload" crossorigin="" href="/assets/chunks/nprogress.Cino7761.js"><link rel="stylesheet" crossorigin="" href="/assets/app.B7MvfJ-n.css"><link rel="stylesheet" crossorigin="" href="/assets/group-icons.DLBb7Rhi.css"><link rel="modulepreload" crossorigin="" href="/assets/post.BHT5Lj0u.js"><link rel="stylesheet" href="/assets/post.DDxwAI70.css"><link rel="stylesheet" href="/assets/group-icons.DLBb7Rhi.css"><link rel="modulepreload" crossorigin="" href="/assets/tuxun-plugin.CMzD-oFK.js"><title>å›¾å¯»å¤ç›˜åŠ©æ‰‹çš„å¼€å‘ - åˆ©ç”¨æµè§ˆå™¨è„šæœ¬åŠ«æŒ XHR è¯·æ±‚çš„åŸºæœ¬æ–¹æ³• - æ©™ã®å°ç«™</title><script id="check-mac-os" async="">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap"><meta property="og:locale:alternate" content="en"><meta name="description" content="é è‡ªå·±ï¼Œå®é™…ä¸€äº›ãƒ¾(^âˆ€^)ï¾‰"><meta property="og:description" content="é è‡ªå·±ï¼Œå®é™…ä¸€äº›ãƒ¾(^âˆ€^)ï¾‰"><meta property="og:locale" content="zh-CN"><meta property="og:site_name" content="æ©™ã®å°ç«™"><meta property="og:title" content="å›¾å¯»å¤ç›˜åŠ©æ‰‹çš„å¼€å‘ - åˆ©ç”¨æµè§ˆå™¨è„šæœ¬åŠ«æŒ XHR è¯·æ±‚çš„åŸºæœ¬æ–¹æ³•"><meta property="og:image" content="/yun.svg"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.zhaozilin.cn/"><link rel="icon" href="/yun.svg" type="image/svg+xml"><meta name="generator" content="Valaxy 0.25.4"><meta name="theme-color" content="#fff"><meta name="msapplication-TileColor" content="#fff"><meta name="twitter:card" content="summary_large_image"></head><body><div id="app" data-server-rendered="true"><!--[--><!--[--><!--[--><!----><!----><div class="yun-page-header-gradient" style="--gradient-from:161 196 253;--gradient-to:194 233 251"></div><!----><!----><!----><canvas class="fireworks"></canvas><!--[--><div class="yun-bg"></div><!--]--><div class="yun-page-loading" absolute="" left-0="" right-0="" bottom-0="" top-0="" flex="" justify="center" items-center="" z-10="" bg="$va-c-bg" data-v-673bc094=""><div class="spinner" data-v-673bc094=""></div></div><a href="#" class="back-to-top yun-icon-btn bg-$va-c-bg-soft shadow-md"><div class="size-8" i-ri-arrow-up-s-line=""></div><svg class="progress-circle-container" viewBox="0 0 100 100"><circle stroke-dasharray="301.59289474462014 301.59289474462014" stroke-dashoffset="301.59289474462014" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="progress-circle" cx="50" cy="50" r="48" fill="none"></circle></svg></a><!-- TODO --><!-- <YunDock /> --><!--]--><!--[--><!--]--><!----><!--]--><!--[--><div flex="~" class="w-full m-auto justify-center items-start gap-4 mt-12 md:mt-24"><!--[--><!----><main class="yun-main lt-md:w-full" flex="~ center"><!--[--><div class="content w-full md:w-3xl lg:w-2xl xl:w-2xl 2xl:w-4xl" flex="~ col grow" p="lt-md:0"><div class="yun-card flex-center rounded-2 relative" flex="col" min-h="100px" bg="$va-c-bg-light" m="0" style=""><!----><!----><!--[--><div class="mt-8 mb-4"><!--[--><header class="post-header"><h1 p="2" text="2xl center" font="serif black" style="" class="post-title flex-center"><!----><span inline-flex="" class="leading-none">å›¾å¯»å¤ç›˜åŠ©æ‰‹çš„å¼€å‘ - åˆ©ç”¨æµè§ˆå™¨è„šæœ¬åŠ«æŒ XHR è¯·æ±‚çš„åŸºæœ¬æ–¹æ³•</span></h1></header><!--]--></div><!--[--><!--[--><!--[--><!--[--><!----><!----><!----><div flex="~ center" text="sm" class="flex-col gap-2! post-meta gap-4"><div class="post-time flex items-center gap-4"><span class="posted-time inline-flex-center gap-1" title="å‘è¡¨äº2025-07-19 16:00:00"><div class="inline-block" i-ri-calendar-line=""></div><time class="op-80">2025-07-19</time></span><!----></div><!--[--><span id="busuanzi_container_page_pv"><span class="watch inline-flex-center gap-1" title="è®¿é—®é‡"><div i-ri-eye-line=""></div><span id="busuanzi_value_page_pv"></span></span></span><!--]--><div class="inline-flex-center gap-4"><div class="inline-flex-center post-counter gap-4"><span class="word-count inline-flex-center gap-1" title="æœ¬æ–‡å­—æ•°"><div class="inline-block" i-ri-file-word-line=""></div><span class="op-80">1.7k</span></span><span class="reading-time inline-flex-center gap-1" title="é˜…è¯»æ—¶é•¿"><div i-ri-timer-line=""></div><time class="op-80">7m</time></span></div><!----></div></div><!--]--><div class="inline-flex mt-2" text="sm" py="1"><a href="/categories?category=%E7%BC%96%E7%A8%8B/Web" class="transition post-category inline-flex-center text-xs border-$va-c-divider" px-2="" h="7" border="" rounded-full="" hover="bg-blue-500 text-white"><div m="x-1" inline-flex="" i-ri-folder-2-line=""></div><span>ç¼–ç¨‹ / Web</span></a><span mx="2"></span><div class="post-tags inline-flex" items="center" gap="1" flex="wrap 1" justify="end"><!--[--><a href="/tags/?tag=%E6%B2%B9%E7%8C%B4" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2="" h="7" rounded-full="" border="" hover="bg-blue-500 text-white"><span>æ²¹çŒ´</span></a><a href="/tags/?tag=%E8%84%9A%E6%9C%AC" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2="" h="7" rounded-full="" border="" hover="bg-blue-500 text-white"><span>è„šæœ¬</span></a><a href="/tags/?tag=%E6%B8%B8%E6%88%8F" class="transition post-tag inline-flex-center text-xs border-$va-c-divider" px-2="" h="7" rounded-full="" border="" hover="bg-blue-500 text-white"><span>æ¸¸æˆ</span></a><!--]--></div></div><!--]--><!--]--><!--]--><div p="x-4 b-8" class="sm:px-6 lg:px-12 xl:px-16" w="full"><!--[--><!--]--><!--[--><!-- <Transition appear> --><article class="markdown-body"><!--[--><!----><blockquote class="yun-time-warning" op="80">æœ¬æ–‡æœ€åæ›´æ–°äº 7 ä¸ªæœˆå‰ï¼Œæ–‡ä¸­æ‰€æè¿°çš„ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜ã€‚</blockquote><!--[--><!--]--><!--[--><h2 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h2><p><a href="https://tuxun.fun/" target="_blank" rel="noreferrer">å›¾å¯»</a>æ˜¯ä¸€æ¬¾é€šè¿‡ç°å®å…¨æ™¯å›¾æ¥çŒœæµ‹ä½ç½®çš„å¨±ä¹åŒ–å­¦ä¹ åº”ç”¨ã€‚ç±»ä¼¼äºå›½å¤–çš„ <a href="https://www.geoguessr.com/" target="_blank" rel="noreferrer">GeoGuessr</a>ï¼Œä½ å¯ä»¥é€šè¿‡è§‚å¯Ÿè¡—æ™¯è¿›è¡Œåˆ¤æ–­ï¼Œé€šè¿‡ç‚¹å‡»åœ°å›¾å¾—åˆ†ã€‚å®ƒä½¿ç”¨çš„è¡—æ™¯è½¦å…¨æ™¯ï¼Œä¸»è¦æ¥è‡ªç™¾åº¦ã€è…¾è®¯ã€è°·æ­Œä¸‰å®¶æä¾›å•†ã€‚</p><p>æœ¬æ–‡å°†åˆ¶ä½œèƒ½å¤Ÿè§£ææ¥è‡ªå›¾å¯»æœåŠ¡ç«¯å“åº”çš„<strong>å›¾å¯»å¤ç›˜åŠ©æ‰‹</strong>ï¼Œå€Ÿæ­¤æ¢è®¨ä½¿ç”¨æµè§ˆå™¨æ‰©å±•æˆ–è„šæœ¬æ‹¦æˆªè¯·æ±‚ï¼ˆFetchï¼‰çš„åŸºæœ¬æ–¹æ³•ã€‚ä»æ§åˆ¶å°ç½‘ç»œæŠ“åŒ…èµ·æ­¥ï¼Œåˆ°ç¼–å†™è‡ªåŠ¨åŒ–è§£æè¯·æ±‚/å“åº”ä¿¡æ¯çš„æµè§ˆå™¨è„šæœ¬ã€‚</p><!-- more --><h2 id="å‡†å¤‡å·¥ä½œ" tabindex="-1">å‡†å¤‡å·¥ä½œ <a class="header-anchor" href="#å‡†å¤‡å·¥ä½œ" aria-label="Permalink to &quot;å‡†å¤‡å·¥ä½œ&quot;">â€‹</a></h2><blockquote><p>ğŸ’»æˆ‘çš„å¼€å‘ç¯å¢ƒï¼šWindows 10, Chrome 138.0.0.0</p></blockquote><ol><li><p>å®‰è£… <a href="https://www.tampermonkey.net/#" target="_blank" rel="noreferrer">Tampermonkey</a> æµè§ˆå™¨æ‰©å±•ã€‚</p></li><li><p>æ³¨å†Œ<a href="https://lbsyun.baidu.com/apiconsole/key" target="_blank" rel="noreferrer">ç™¾åº¦å¼€æ”¾å¹³å°</a>ï¼Œå®Œæˆä¸ªäººå®åè®¤è¯ï¼Œç”³è¯· AK (API Key)ï¼Œåº”ç”¨ç±»å‹ä¸ºæµè§ˆå™¨ç«¯ï¼ŒIPç™½åå•å¡«å†™<code>*</code>ã€‚</p></li></ol><h2 id="ç ”ç©¶" tabindex="-1">ç ”ç©¶ <a class="header-anchor" href="#ç ”ç©¶" aria-label="Permalink to &quot;ç ”ç©¶&quot;">â€‹</a></h2><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">æ³¨æ„</p><p>è¯·å‹¿æ»¥ç”¨ã€‚åœ¨å›¾å¯»ä¸­çš„åŒ¹é…/ç§¯åˆ†èµ›ä¸­å¯ç”¨è„šæœ¬ï¼Œå¯èƒ½è¢«æ°¸ä¹…å°ç¦ã€‚</p></div><p>è®¿é—®å›¾å¯»ï¼Œä½¿ç”¨<code>F12</code>å¼€å¯æµè§ˆå™¨å¼€å‘è€…é¢æ¿ï¼Œåˆ‡æ¢åˆ°ç½‘ç»œé€‰é¡¹å¡ã€‚éšä¾¿è¿›å…¥ä¸€å±€å•äººæ¸¸æˆï¼Œå®ŒæˆæŠ“åŒ…å·¥ä½œã€‚</p><figure><img src="https://s2.loli.net/2025/07/19/b3CewMHJUyVkIZ6.png" alt="2025071903.png" loading="lazy" decoding="async"></figure><p>ç­›é€‰<code>Fetch/XHR</code>ï¼Œæµè§ˆæŠ“åˆ°çš„è¯·æ±‚ï¼Œå…¶ä¸­ï¼š</p><ul><li><code>getSelfProfile</code> è·å–ç©å®¶çš„ä¸ªäººä¿¡æ¯ï¼Œå¦‚æœåœ¨å¤šäººæ¯”èµ›å¯¹å±€å†…ï¼Œåˆ™ä¸ºæ‰€æœ‰åœºä¸Šç©å®¶çš„ä¿¡æ¯ã€‚</li><li><code>listEmojis</code> ç©å®¶å¯¹å±€ä¸­å¯ç”¨çš„è¡¨æƒ…åŒ…åˆ—è¡¨ã€‚</li><li><code>join?</code> <code>get?</code> åˆ™ä¸ºå¯¹å±€åŸºæœ¬ä¿¡æ¯ã€‚</li></ul><p>é‡ç‚¹åœ¨äº<code>getPanoInfo?</code>è¿™ä¸€è¯·æ±‚ï¼Œå®ƒçš„è¯·æ±‚åœ°å€ä¸ºå›¾å¯»çš„ APIï¼Œä½†æ˜¯ç«Ÿç„¶èƒ½å¤Ÿå¾—åˆ°åŒ…æ‹¬å…·ä½“ç»çº¬åº¦çš„å“åº”ã€‚</p><figure><img src="https://s2.loli.net/2025/07/19/bVmH2UjJOYNdikP.png" alt="2025071902.png" loading="lazy" decoding="async"></figure><p>æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¿™æ ·çš„å“åº”åŒ…å«äº†å¤šå°‘ä¿¡æ¯ï¼š</p><div class="language-json"><button title="Copy code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre=""><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "success"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "data"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "fov"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "lat"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">41.20634678633731</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// WGS84 åæ ‡ç³»</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "lng"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">123.20092025890284</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "bd09Lat"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">41.212183</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ç™¾åº¦åæ ‡ç³»</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "bd09Lng"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">123.207489</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "pano"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"09011100011605101534289442L"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// è¡—æ™¯ ID</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "centerHeading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">82.52000000000001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æœå‘</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "height"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "width"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "links"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// å‘¨è¾¹è¡—æ™¯ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "pano"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"09011100011605101534260722L"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "heading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">353.647909642982</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "centerHeading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">83.72999999999999</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "pano"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"09011100011605101532194292L"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "heading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">288.20622437119687</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "centerHeading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">349.13</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "pano"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"09011100011605101532237942L"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "heading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">11.61148642388849</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "centerHeading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2.480000000000004</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "pano"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"09011100011605101534308772L"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "heading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">173.50419815458238</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "centerHeading"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">84.58000000000001</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hintCode"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hintMessage"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre><button class="collapse"></button></div><p>å›¾å¯»ä¸ºä½•è¦å°†åŒ…å«ç­”æ¡ˆçš„å“åº”å‘é€ç»™å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬æ— ä»å¾—çŸ¥ã€‚äº‹å®ä¸Šï¼Œå·²ç»æœ‰å¾ˆå¤šäººå‘å›¾å¯»æ±‡æŠ¥äº†è¿™ä¸€é—®é¢˜ï¼Œå¯å®˜æ–¹å®æ„¿åœ¨æ’ä½èµ›ä¸­åŠ å¼ºå¯¹æ’ä»¶çš„ç›‘æ§ï¼Œä¹Ÿä¸æ„¿æ„ä¿®å¤è¿™ä¸€é—®é¢˜ã€‚</p><p>è¿›ä¸€æ­¥æ·±å…¥æ¢ç©¶å‘ç°ï¼Œæäº¤ç­”æ¡ˆæ—¶ï¼ŒåŒ…å«ç”¨æˆ·é€‰æ‹©ç»çº¬åº¦çš„è¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨éªŒè¯ç­”æ¡ˆåè¿”å›ç»“æœã€‚ç­”æ¡ˆçš„éªŒè¯æ˜¯åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œçš„ï¼Œæ²¡å¿…è¦æŠŠç­”æ¡ˆå‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p><p>å¯èƒ½çš„è§£é‡Šæ˜¯ï¼Œè¡—æ™¯å—æ˜¯ç›´æ¥ä»ç™¾åº¦åœ°å›¾æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·çš„ï¼Œè€Œä¸ç»è¿‡å›¾å¯»æœåŠ¡å™¨æˆ–å…¶ CDN ä¸­è½¬ï¼Œå…¶ä¸­åŒ…è¡—æ™¯ ID çš„æ•°æ®ï¼Œä¸éœ€è¦åˆ»æ„éšè—ã€‚ç„¶è€Œï¼Œè°·æ­Œè¡—æ™¯å³ä½¿é€šè¿‡ä¸­è½¬ï¼Œä¹Ÿæ²¡æœ‰è¢«æŠ¹å»ç»çº¬åº¦ä¿¡æ¯ã€‚</p><h2 id="å®ç°" tabindex="-1">å®ç° <a class="header-anchor" href="#å®ç°" aria-label="Permalink to &quot;å®ç°&quot;">â€‹</a></h2><p>é€šè¿‡ç ”ç©¶ï¼Œæˆ‘ä»¬å‘ç°è¡—æ™¯çš„è¯¦ç»†ä¿¡æ¯å·²ç»å‘é€ç»™ç©å®¶äº†ã€‚é‚£ä¹ˆåªéœ€è¦æˆªè·å¯¹åº”çš„å“åº”ä¿¡æ¯ï¼Œå°±å¯ä»¥åœ¨å¤ç›˜æ—¶å¾—åˆ°ç»çº¬åº¦ï¼Œè¿›è€Œè¿ç”¨åœ°å›¾ API çš„é€†åœ°ç†ç¼–ç åŠŸèƒ½è§£æå¯è¯»çš„åœ°å€ã€‚</p><blockquote><p>å®Œæ•´ Demoï¼š<a href="https://greasyfork.org/zh-CN/scripts/541918" target="_blank" rel="noreferrer">https://greasyfork.org/zh-CN/scripts/541918</a></p></blockquote><blockquote><p>ç¢ç¢å¿µï¼šç”±äºä¸€æ—¶ç–å¿½ï¼Œæ”¯æŒä» API è·å– POI ä¿¡æ¯ã€æ”¯æŒè°·æ­Œè¡—æ™¯å›½å®¶å¤§åŒºè§£æçš„ Demo è¢«æ„å¤–åˆ é™¤ï¼Œæ— æ³•æ‰¾å›â€¦ æ­¤ç‰ˆæœ¬èƒ½å¤Ÿæ­£å¸¸è§£æç™¾åº¦ã€è…¾è®¯ä¸¤å®¶è¡—æ™¯çš„ç»çº¬åº¦ã€å‘¨è¾¹è¡—æ™¯ã€çœå¸‚åŒºä¿¡æ¯ï¼Œæ— æ³•è§£æè°·æ­Œè¡—æ™¯ã€‚</p></blockquote><h3 id="åŠ«æŒ" tabindex="-1">åŠ«æŒ <a class="header-anchor" href="#åŠ«æŒ" aria-label="Permalink to &quot;åŠ«æŒ&quot;">â€‹</a></h3><p>é€šè¿‡é‡å†™<code>XMLHttpRequest</code>æ¥æ‹¦æˆªè¯·æ±‚ã€å“åº”ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨<code>return originalOpen.apply(this, arguments);</code>æ”¾è¡Œã€‚</p><div class="language-js"><button title="Copy code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre=""><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// UI ä»£ç å·²é™¤å»ï¼Œä»…ä¿ç•™æ ¸å¿ƒé€»è¾‘</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    'use strict'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è°ƒè¯•æ¨¡å¼å¼€å…³</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> DEBUG_MODE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> OriginalXHR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> window.XMLHttpRequest;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // æ—¥å¿—å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DEBUG_MODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'[å›¾å¯»å°åŠ©æ‰‹-Log]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">     // é‡å†™ XMLHttpRequest ä»¥æ‹¦æˆªè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">XMLHttpRequest</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> xhr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> OriginalXHR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> originalOpen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> xhr.open;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> originalSend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> xhr.send;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">open</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æ‹¦æˆªåˆ°XHRè¯·æ±‚:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, url);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> originalOpen.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">send</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'load'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._url;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                // è¿™é‡Œé€šè¿‡æ¸¸æˆä¸­ä¸åŒè¡—æ™¯æ—¶çš„æŠ“åŒ…ï¼Œè·å–ç›¸åº” API åœ°å€ï¼Œç„¶åå†æ­¤å¤„åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> baiduPanoRegex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">https:</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">tuxun</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">fun</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">api</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">v0</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">tuxun</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">mapProxy</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">getPanoInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> tencentPanoRegex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">https:</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">tuxun</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">fun</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">api</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">v0</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">tuxun</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">mapProxy</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">getQQPanoInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> googlePanoRegex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">https:</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">tile</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">chao-fan</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">com</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/\$</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">rpc</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">google</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">internal</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">maps</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">mapsjs</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">v1</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\.</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">MapsJsInternalService</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF">GetMetadata</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                // è½¬ç»™è§£æå‡½æ•°è´Ÿè´£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (baiduPanoRegex.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æ£€æµ‹åˆ°ç™¾åº¦è¡—æ™¯getPanoInfo XHRè¯·æ±‚'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    handleXHRPanoResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(xhr, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'baidu'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (tencentPanoRegex.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æ£€æµ‹åˆ°è…¾è®¯è¡—æ™¯getQQPanoInfo XHRè¯·æ±‚'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    handleXHRPanoResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(xhr, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'tencent'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (googlePanoRegex.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(url)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'æ£€æµ‹åˆ°è°·æ­Œè¡—æ™¯XHRè¯·æ±‚'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    handleXHRPanoResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(xhr, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'google'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> originalSend.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> xhr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // å¤„ç†XHRè¡—æ™¯å“åº”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> handleXHRPanoResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">xhr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">mapType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> urlObj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(xhr._url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> panoId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mapType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'baidu'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mapType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'tencent'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            panoId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> urlObj.searchParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'pano'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (mapType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'google'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // è°·æ­Œè¡—æ™¯çš„å“åº”éå¸¸æ— åºå¤æ‚ï¼Œéœ€è¦æ­£åˆ™è¡¨è¾¾å¼åˆ¤æ–­ï¼Œæš‚æ—¶ä¸åš</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            panoId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'æ— '</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">mapType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'baidu'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'ç™¾åº¦'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mapType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'tencent'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'è…¾è®¯'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'æœªçŸ¥'}è¡—æ™¯XHRè¯·æ±‚çš„Pano ID:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, panoId);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // è§£æå“åº”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> responseText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> xhr.responseText;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> jsonData;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                jsonData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(responseText);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">mapType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'baidu'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'ç™¾åº¦'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> mapType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'tencent'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'è…¾è®¯'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'è°·æ­Œ'}è¡—æ™¯XHRå“åº”JSON:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, jsonData);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (parseError) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">                // ä¸æ˜¯JSONæ ¼å¼ï¼Œåˆ™ä¸€å®šæ˜¯è°·æ­Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`è°·æ­Œå“åº”JSON:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, jsonData);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">         catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'å¤„ç†XHRè¯·æ±‚å‡ºé”™:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})();</span></span></code></pre><button class="collapse"></button></div><h3 id="åˆ©ç”¨ç™¾åº¦-api-è§£æ" tabindex="-1">åˆ©ç”¨ç™¾åº¦ API è§£æ <a class="header-anchor" href="#åˆ©ç”¨ç™¾åº¦-api-è§£æ" aria-label="Permalink to &quot;åˆ©ç”¨ç™¾åº¦ API è§£æ&quot;">â€‹</a></h3><p>é€šè¿‡ç™¾åº¦ API æä¾›çš„åæ ‡è½¬æ¢ã€é€†åœ°ç†ç¼–ç åŠŸèƒ½ã€‚å®Œæˆä»ç»çº¬åº¦åˆ°åœ°å€çš„è§£æã€‚</p><div class="language-js"><button title="Copy code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre=""><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> BAIDU_AK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// AK</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fetchLocationInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">lat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">lng</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (window.BMap) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        doGeocode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(lat, lng);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'script'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `https://api.map.baidu.com/api?v=3.0&amp;ak=${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">BAIDU_AK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}&amp;callback=initBaiduMap`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    script.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'text/javascript'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    document.head.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(script);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">initBaiduMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        doGeocode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(lat, lng);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // è¶…æ—¶å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">window.BMap) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"ç™¾åº¦ API è¶…æ—¶"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// æ‰§è¡Œé€†åœ°ç†ç¼–ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> doGeocode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">lat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">lng</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> locationInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'tuxun-location-info'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> locationStatus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'tuxun-location-status'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> BMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(lng, lat);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> convertor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> BMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Convertor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> points</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [point];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        // åç»­å¦‚æœè¦æ”¯æŒè°·æ­Œè¡—æ™¯ï¼Œä¼šå‘ç°è°·æ­Œè¡—æ™¯æ²¡æœ‰ç™¾åº¦åæ ‡ç³»ã€‚æ‰€ä»¥è¿™é‡Œä½¿ç”¨ BGS åæ ‡ç³»è½¬æ¢ä¸ºç™¾åº¦åæ ‡ç³»ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å“åº”ä¿¡æ¯ä¸­çš„ç™¾åº¦åæ ‡ç³»</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        convertor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">translate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(points, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (data.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> bdPoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data.points[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> geoc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> BMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Geocoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                geoc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(bdPoint, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> address</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rs.addressComponents;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">                    log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(address);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'åæ ‡è½¬æ¢å¤±è´¥:'</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> data.status);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ä½ç½®è§£æå¤±è´¥:'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre><button class="collapse"></button></div><h2 id="å†™åœ¨æœ€å" tabindex="-1">å†™åœ¨æœ€å <a class="header-anchor" href="#å†™åœ¨æœ€å" aria-label="Permalink to &quot;å†™åœ¨æœ€å&quot;">â€‹</a></h2><p>æ–‡ç« ä¸­æ‹¦æˆª XML è¯·æ±‚çš„æ–¹æ³•å…·æœ‰å¹¿æ³›é€‚ç”¨æ€§ã€‚Fetch è¯·æ±‚æœ¬æ–‡è™½æ²¡æœ‰æ¶‰åŠï¼Œä½†æ˜¯åŸºæœ¬æ€è·¯ä¸€è‡´ï¼Œå³<strong>é‡å†™å¯¹åº”æ–¹æ³•ï¼Œæ‹¦æˆªå¹¶å‚¨å­˜è¯·æ±‚æ•°æ®ï¼Œç„¶åäºŒæ¬¡æ”¾è¡Œ</strong>ã€‚æ‹¿åˆ°å“åº”çš„ JSON æ•°æ®åï¼Œå°±å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è¿›è¡Œå¯¹åº”çš„è§£æã€‚</p><!--]--><!--]--><!----><!----></article><!-- </Transition> --><!--]--><!--[--><!--[--><!--[--><!----><!----><!--]--><!--]--><!--]--></div><!--]--><!----></div><!--[--><!--]--><!--[--><div class="post-nav"><div class="post-nav-item"><a href="/posts/seewo-hugo" class="post-nav-prev" title="å¹²æ‰å¸Œæ²ƒç®¡å®¶ - å¼ºåˆ¶å…³é—­å†°ç‚¹è¿˜åŸå’Œå¸è½½é›†æ§"><div class="icon" i-ri-arrow-left-s-line=""></div><span class="title truncate" text="sm">å¹²æ‰å¸Œæ²ƒç®¡å®¶ - å¼ºåˆ¶å…³é—­å†°ç‚¹è¿˜åŸå’Œå¸è½½é›†æ§</span></a></div><div class="post-nav-item"><a href="/posts/move-to-valaxy" class="post-nav-next" title="å°†åšå®¢ä» Hexo è¿ç§»åˆ° Valaxy æ•™ç¨‹"><span class="title truncate" text="sm">å°†åšå®¢ä» Hexo è¿ç§»åˆ° Valaxy æ•™ç¨‹</span><div class="icon" i-ri-arrow-right-s-line=""></div></a></div></div><!--]--><!--[--><!--]--><!--[--><div class="yun-card flex-center rounded-2 comment yun-comment sm:p-6 lg:px-12 xl:px-16" flex="col" min-h="100px" bg="$va-c-bg-light" w="full" p="4"><!----><!----><!--[--><!----><!--]--><!----></div><!--]--><!--[--><!-- eslint-disable-next-line vue/no-lone-template empty --><template class="mt-4"></template><!--]--><!--[--><!--]--><!--[--><!--]--></div><!--]--></main><!--[--><button class="xl:hidden toc-btn shadow-md fixed yun-icon-btn z-20 bg-$va-c-bg-soft" opacity="75" right="4" bottom="19"><div i-ri-file-list-line=""></div></button><!----><aside flex="~ col" class="va-card yun-aside sticky top-0 lg:top-$yun-margin-top min-h-sm" text="center" overflow="auto"><div style="display:none" class="w-full" flex="~ col" pb-2=""><!--[--><h2 m="t-6 b-2" font="serif black">æ–‡ç« ç›®å½•</h2><div style="display:none" data-v-6dc67c73=""><div class="content" data-v-6dc67c73=""><div class="outline-title" data-v-6dc67c73="">æœ¬é¡µ</div><div class="outline-marker" data-v-6dc67c73=""></div><nav aria-labelledby="doc-outline-aria-label" data-v-6dc67c73=""><span id="doc-outline-aria-label" class="visually-hidden" data-v-6dc67c73="">Table of Contents for current page</span><ul class="root va-toc relative z-1 css-i18n-toc" data-v-6dc67c73="" data-v-699db71a=""><!--[--><!--]--></ul></nav></div></div><!--]--><div class="flex-grow"></div><!----></div></aside><!--]--><!--]--></div><footer flex="~ col" class="relative yun-footer va-footer px-4 py-4 pt-0 text-$va-c-text-light w-full mt-14" bg="white dark:$va-c-bg-soft" text="center sm"><div class="yun-cloud absolute top--10 left-0 right-0"><svg class="waves" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" fill="var(--yun-c-cloud)"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><div class="beian" m="y-2"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">èµ£ICPå¤‡2022003307å·</a></div><div class="copyright flex justify-center items-center gap-2" p="1"><span>Â©<!--[--> 2019 -<!--]--> 2026</span><a class="animate-pulse inline-flex" href="https://blog.zhaozilin.cn/links" target="_blank" title="(^_^)"><div class="i-ri-cloud-line"></div></a><span>Chengzi600</span></div><div class="powered" m="2"><span>ç”± <a href="https://github.com/YunYouJun/valaxy" target="_blank" rel="noopener">Valaxy</a> <span class="op-60">v0.25.4</span> é©±åŠ¨</span><span mx-1="">|</span><span><span>ä¸»é¢˜</span><span mx-1="">-</span><a href="https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-theme-yun" title="valaxy-theme-yun" target="_blank">Yun</a><span class="ml-1 op-60">v0.25.4</span></span></div><!--[--><!-- è‡ªå®šä¹‰é¡µè„šå†…å®¹ --><div class="vc-site-live-time"><!--[--><span>æœ¬ç«™å·²è¿è¡Œ</span><!--]--><span mx-1="">0 å¤©</span><span mx-1="">0 å°æ—¶</span><span mx-1="">0 åˆ†</span><span mx-1="">0 ç§’</span><!--[--><!--]--></div><div>æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡</div><div>æœ¬ç«™è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äººæ¬¡</div><!--]--><div class="yun-footer-gradient" style="--gradient-from:161 196 253;--gradient-to:194 233 251"></div></footer><!--]--><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{"yun-app":{},"app":{"showLoading":true},"site":{},"routerStore":{}}}'</script><script type="application/ld+json" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://blog.zhaozilin.cn/#identity","@type":"Person","name":"Chengzi600","url":"https://blog.zhaozilin.cn/","image":{"@id":"https://blog.zhaozilin.cn/#/schema/image/b4bdee6"},"sameAs":["/atom.xml","https://qm.qq.com/q/2xQ040ssFK","https://qm.qq.com/cgi-bin/qm/qr?k=JZCUQmZXUfkkOZI26nmGd5euc45NUIxQ&jump_from=webapi&authKey=OscGZ0B3mzzLeiow0PCxk2ItKVKRwLMrWiWSGGhEcy7w0JjBrUrNu4D+wvcq5IhA","https://github.com/Chengzi600","https://space.bilibili.com/361273232","2752718571@qq.com"]},{"@id":"https://blog.zhaozilin.cn/#website","@type":"WebSite","dateModified":"2025-07-19 16:00:00","datePublished":"2025-07-19 16:00:00","inLanguage":"en","name":"å›¾å¯»å¤ç›˜åŠ©æ‰‹çš„å¼€å‘ - åˆ©ç”¨æµè§ˆå™¨è„šæœ¬åŠ«æŒ XHR è¯·æ±‚çš„åŸºæœ¬æ–¹æ³•","url":"https://blog.zhaozilin.cn/","publisher":{"@id":"https://blog.zhaozilin.cn/#identity"}},{"@id":"https://blog.zhaozilin.cn/#webpage","@type":"WebPage","dateModified":"2025-07-19T16:00:00.000Z","datePublished":"2025-07-19T16:00:00.000Z","description":"é è‡ªå·±ï¼Œå®é™…ä¸€äº›ãƒ¾(^âˆ€^)ï¾‰","name":"å›¾å¯»å¤ç›˜åŠ©æ‰‹çš„å¼€å‘ - åˆ©ç”¨æµè§ˆå™¨è„šæœ¬åŠ«æŒ XHR è¯·æ±‚çš„åŸºæœ¬æ–¹æ³•","url":"https://blog.zhaozilin.cn/","about":{"@id":"https://blog.zhaozilin.cn/#identity"},"isPartOf":{"@id":"https://blog.zhaozilin.cn/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://blog.zhaozilin.cn/"]}]},{"@id":"https://blog.zhaozilin.cn/#article","dateModified":"2025-07-19T16:00:00.000Z","datePublished":"2025-07-19T16:00:00.000Z","description":"é è‡ªå·±ï¼Œå®é™…ä¸€äº›ãƒ¾(^âˆ€^)ï¾‰","headline":"å›¾å¯»å¤ç›˜åŠ©æ‰‹çš„å¼€å‘ - åˆ©ç”¨æµè§ˆå™¨è„šæœ¬åŠ«æŒ XHR è¯·æ±‚çš„åŸºæœ¬æ–¹æ³•","inLanguage":"en","thumbnailUrl":"https://blog.zhaozilin.cn/yun.svg","@type":["Article","BlogPosting"],"author":{"@id":"https://blog.zhaozilin.cn/#/schema/person/701b0cc"},"image":{"@id":"https://blog.zhaozilin.cn/#/schema/image/20eb09b"},"isPartOf":{"@id":"https://blog.zhaozilin.cn/#webpage"},"mainEntityOfPage":{"@id":"https://blog.zhaozilin.cn/#webpage"},"publisher":{"@id":"https://blog.zhaozilin.cn/#identity"}},{"@id":"https://blog.zhaozilin.cn/#/schema/person/701b0cc","@type":"Person","name":"Chengzi600","url":"https://valaxy.site"},{"@id":"https://blog.zhaozilin.cn/#/schema/image/b4bdee6","@type":"ImageObject","contentUrl":"https://thirdqq.qlogo.cn/g?b=sdk&nk=2752718571&s=640","inLanguage":"en","url":"https://thirdqq.qlogo.cn/g?b=sdk&nk=2752718571&s=640"},{"@id":"https://blog.zhaozilin.cn/#/schema/image/20eb09b","@type":"ImageObject","contentUrl":"https://blog.zhaozilin.cn/yun.svg","inLanguage":"en","url":"https://blog.zhaozilin.cn/yun.svg"}]}</script></body></html>